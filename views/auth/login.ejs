<%- include('../partials/header') %>

    <div class="auth-container">
        <div class="auth-card fade-in">
            <h1 class="auth-title">
                <i class="fa-solid fa-layer-group"
                    style="font-size: 3rem; display: block; margin-bottom: 1rem; color: var(--color-primary);"></i>
                Welcome Back
            </h1>

            <% if (error_msg && error_msg.length> 0) { %>
                <div class="alert alert-error">
                    <i class="fa-solid fa-circle-exclamation"></i>
                    <%= error_msg %>
                </div>
                <% } %>
                    <% if (success_msg && success_msg.length> 0) { %>
                        <div class="alert alert-success">
                            <i class="fa-solid fa-check-circle"></i>
                            <%= success_msg %>
                        </div>
                        <% } %>
                            <% if (error && error.length> 0) { %>
                                <div class="alert alert-error">
                                    <i class="fa-solid fa-circle-exclamation"></i>
                                    <%= error %>
                                </div>
                                <% } %>

                                    <form action="/auth/login" method="POST">
                                        <div class="form-group">
                                            <label class="form-label">Username or Email</label>
                                            <input type="text" name="identifier" class="form-control"
                                                placeholder="username or email" required>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">Password</label>
                                            <input type="password" name="password" class="form-control"
                                                placeholder="••••••••" required>
                                        </div>

                                        <button type="submit" class="btn btn-primary btn-block">Sign In</button>

                                        <% if (oauth && (oauth.github || oauth.discord || oauth.google || oauth.apple))
                                            { %>
                                            <div class="divider">
                                                <span>or continue with</span>
                                            </div>

                                            <div class="social-login-grid">
                                                <% if (oauth.github) { %>
                                                    <a href="/auth/github" class="btn btn-social btn-github"
                                                        title="Sign in with GitHub">
                                                        <i class="fa-brands fa-github"></i>
                                                    </a>
                                                    <% } %>
                                                        <% if (oauth.discord) { %>
                                                            <a href="/auth/discord" class="btn btn-social btn-discord"
                                                                title="Sign in with Discord">
                                                                <i class="fa-brands fa-discord"></i>
                                                            </a>
                                                            <% } %>
                                                                <% if (oauth.google) { %>
                                                                    <a href="/auth/google"
                                                                        class="btn btn-social btn-google"
                                                                        title="Sign in with Google">
                                                                        <i class="fa-brands fa-google"></i>
                                                                    </a>
                                                                    <% } %>
                                                                        <% if (oauth.apple) { %>
                                                                            <a href="/auth/apple"
                                                                                class="btn btn-social btn-apple"
                                                                                title="Sign in with Apple">
                                                                                <i class="fa-brands fa-apple"></i>
                                                                            </a>
                                                                            <% } %>
                                            </div>
                                            <% } %>

                                                <!-- Previous Social Login Link (Hidden as we moved buttons here) -->
                                                <!-- <div class="mt-4">
                                            <a href="/auth/social" class="btn btn-secondary btn-block"
                                                style="display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
                                                <i class="fa-solid fa-share-nodes"></i> Social Login
                                            </a>
                                        </div> -->

                                                <style>
                                                    .divider {
                                                        display: flex;
                                                        align-items: center;
                                                        text-align: center;
                                                        margin: 1.5rem 0;
                                                        color: var(--text-secondary);
                                                    }

                                                    .divider::before,
                                                    .divider::after {
                                                        content: '';
                                                        flex: 1;
                                                        border-bottom: 1px solid var(--border-color);
                                                    }

                                                    .divider span {
                                                        padding: 0 10px;
                                                        font-size: 0.85rem;
                                                    }

                                                    .social-login-grid {
                                                        display: grid;
                                                        grid-template-columns: repeat(auto-fit, minmax(48px, 1fr));
                                                        gap: 0.75rem;
                                                        margin-top: 1rem;
                                                    }

                                                    .btn-social {
                                                        display: flex;
                                                        align-items: center;
                                                        justify-content: center;
                                                        height: 42px;
                                                        border-radius: var(--radius);
                                                        font-size: 1.25rem;
                                                        transition: all 0.2s;
                                                        color: white;
                                                        border: 1px solid rgba(255, 255, 255, 0.1);
                                                    }

                                                    .btn-social:hover {
                                                        transform: translateY(-2px);
                                                        filter: brightness(1.1);
                                                    }

                                                    .btn-github {
                                                        background-color: #24292e;
                                                    }

                                                    .btn-discord {
                                                        background-color: #5865F2;
                                                    }

                                                    .btn-google {
                                                        background-color: #db4437;
                                                    }

                                                    .btn-apple {
                                                        background-color: #000000;
                                                    }
                                                </style>

                                                <div class="mt-4 text-center">
                                                    <p class="form-label mb-2">Don't have an account? <a
                                                            href="/auth/register" class="text-link">Create one</a></p>
                                                    <p class="form-label"><a href="/auth/reset-password"
                                                            class="text-link">Forgot
                                                            Password?</a></p>
                                                </div>
        </div>
    </div>

    <%- include('../partials/footer') %>